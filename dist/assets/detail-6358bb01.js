import{_ as J,a as Q}from"./UiParentCard.vue_vue_type_script_setup_true_lang-e8d1c95a.js";import{v as W,P as B,ae as X,ac as m,aw as Z,at as ee,o as d,c as T,m as f,b as l,f as c,w as t,O as r,V as p,L as i,ap as u,ay as te,K as v,a as h,t as b,F as D,s as le,z as P,d as a,ax as se,r as E}from"./index-b45d696c.js";import{u as oe}from"./eventStore-82c3dce4.js";import{_ as ne}from"./palhaco-c3575bca.js";import{_ as ae}from"./_plugin-vue_export-helper-c27b6911.js";import"./operationRepository-f71a1956.js";const ie=W({name:"EventDetail",components:{BaseBreadcrumb:J,UiParentCard:Q},setup(){const e=B({title:"Eventos"}),o=B([{text:"Dashboard",disabled:!1,href:"/"},{text:"Eventos",disabled:!1,href:"/Eventos"},{text:"Detalhes",disabled:!0,href:"#"}]),_=Z(),w=ee(),n=oe();_.fullPath.includes("Detalhes")?X(async()=>{await n.getById(_.params.id)}):n.CreateNewEvent();const M=()=>{n.edit()},k=()=>{n.cancel()},y=async()=>{await n.save(),w.push({path:"/Eventos",replace:!0})},C=g=>{n.selectOther(g==="Outros")},V=()=>{n.openModal(!0)},s=()=>{n.openModal(!1)},S=async()=>{await n.confirmVacancy(),w.push({path:"/Eventos",replace:!0})},z=g=>{const I=g.getDate(),q=(g.getMonth()+1).toString().padStart(2,"0"),G=g.getFullYear(),K=g.getHours(),Y=(g.getMinutes()<10?"0":"")+g.getMinutes();return I+"/"+q+"/"+G+" "+K+":"+Y},U=m(()=>n.getEvent),L=m(()=>n.volunteersPresent),$=m(()=>n.isLoading),N=m(()=>n.isEditing),x=m(()=>n.getPlaces),A=m(()=>n.getNumberConfirmed),O=m(()=>n.isOtherSelecteced),F=m(()=>n.showModel),R=m(()=>n.confirmLabel),j=m(()=>n.isTimeEnded),H=m(()=>n.shouldShowButton);return{event:U,isLoading:$,isEditing:N,breadcrumbs:o,page:e,places:x,numberConfirmed:A,edit:M,cancel:k,isOtherSelecteced:O,changeName:C,save:y,showModel:F,confirmModal:V,isTimeEnded:j,confirmLabel:R,closeModal:s,confirmVacancy:S,volunteersPresent:L,shouldShowButton:H,format:z}}}),de={key:0,class:"loading"},ue=a("Editar"),re=a("Gerenciar voluntários"),me=a("Realizado"),fe=a("Cancelar"),ce=a("Salvar"),ge=a("Nome:"),pe=a("Nome:"),be=a("Ponto de Encontro:"),he=a("Data:"),ve=a("Vagas:"),ye=a("Endereço:"),Ve=a("Cidade:"),Ee=a("Informação:"),_e={style:{"margin-bottom":"15px"}},we=a("Participar"),ke=h("hr",{class:"rounded"},null,-1),Ce=h("img",{src:ne,alt:"user",height:"50"},null,-1),Te=["src"],Me=a("Local:"),Be=a("Data:"),De=a("Hora:"),Pe=a("Você tem certeza que irá comparecer?"),Se=a("Cancelar");function ze(e,o,_,w,n,M){const k=E("BaseBreadcrumb"),y=E("router-link"),C=E("VueDatePicker"),V=E("UiParentCard");return d(),T(D,null,[e.isLoading?(d(),T("div",de)):f("",!0),l(k,{title:e.page.title,breadcrumbs:e.breadcrumbs},null,8,["title","breadcrumbs"]),!e.isLoading&&e.event!==null?(d(),c(V,{key:1},{default:t(()=>[!e.isEditing&&e.event.status==1?(d(),c(r,{key:0},{default:t(()=>[l(i,{cols:"12",md:"12",style:{"text-align":"right"}},{default:t(()=>[l(p,{style:{"margin-right":"10px"},size:"large",onClick:o[0]||(o[0]=s=>e.edit()),color:"primary",type:"submit"},{default:t(()=>[ue]),_:1}),e.event!==null?(d(),c(y,{key:0,tag:"v-btn",class:"btn btn-secondary mr-2",to:{name:"ManageVolunteers",params:{id:e.event.id}}},{default:t(()=>[l(p,{size:"large",color:"warning",type:"submit"},{default:t(()=>[re]),_:1})]),_:1},8,["to"])):f("",!0),e.event!==null?(d(),c(y,{key:1,tag:"v-btn",class:"btn btn-success mr-2",to:{name:"FinishVisit",params:{id:e.event.id}}},{default:t(()=>[l(p,{size:"large",color:"success",type:"submit"},{default:t(()=>[me]),_:1})]),_:1},8,["to"])):f("",!0)]),_:1})]),_:1})):f("",!0),e.isEditing?(d(),c(r,{key:1},{default:t(()=>[l(i,{cols:"12",md:"12",style:{"text-align":"right"}},{default:t(()=>[l(p,{style:{"margin-right":"5px"},size:"large",onClick:o[1]||(o[1]=s=>e.cancel()),color:"light",type:"submit"},{default:t(()=>[fe]),_:1}),l(p,{style:{"margin-right":"5px"},size:"large",onClick:o[2]||(o[2]=s=>e.save()),color:"success",type:"submit"},{default:t(()=>[ce]),_:1})]),_:1})]),_:1})):f("",!0),l(r,null,{default:t(()=>[e.isOtherSelecteced?f("",!0):(d(),c(i,{key:0,cols:"12",md:"6"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[ge]),_:1}),l(te,{modelValue:e.event.name,"onUpdate:modelValue":[o[3]||(o[3]=s=>e.event.name=s),e.changeName],items:e.places,label:"Selecione o local",disabled:!e.isEditing},null,8,["modelValue","items","disabled","onUpdate:modelValue"])]),_:1})),e.isOtherSelecteced?(d(),c(i,{key:1,cols:"12",md:"6"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[pe]),_:1}),l(v,{modelValue:e.event.name,"onUpdate:modelValue":o[4]||(o[4]=s=>e.event.name=s),disabled:!e.isEditing},null,8,["modelValue","disabled"])]),_:1})):f("",!0),l(i,{cols:"12",md:"6"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[be]),_:1}),l(v,{modelValue:e.event.meetingPoint,"onUpdate:modelValue":o[5]||(o[5]=s=>e.event.meetingPoint=s),disabled:!e.isEditing},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(r,null,{default:t(()=>[l(i,{cols:"12",md:"8"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[he]),_:1}),l(C,{modelValue:e.event.happenAt,"onUpdate:modelValue":o[6]||(o[6]=s=>e.event.happenAt=s),format:e.format,locale:"pt-BR",disabled:!e.isEditing},null,8,["modelValue","format","disabled"])]),_:1}),l(i,{cols:"12",md:"4"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[ve]),_:1}),l(v,{modelValue:e.event.occupancy,"onUpdate:modelValue":o[7]||(o[7]=s=>e.event.occupancy=s),type:"number",disabled:!e.isEditing},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(r,null,{default:t(()=>[l(i,{cols:"12",md:"8"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[ye]),_:1}),l(v,{modelValue:e.event.address,"onUpdate:modelValue":o[8]||(o[8]=s=>e.event.address=s),disabled:!e.isEditing},null,8,["modelValue","disabled"])]),_:1}),l(i,{cols:"12",md:"4"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[Ve]),_:1}),l(v,{modelValue:e.event.city,"onUpdate:modelValue":o[9]||(o[9]=s=>e.event.city=s),disabled:!e.isEditing},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(r,null,{default:t(()=>[l(i,{cols:"12",md:"12"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[Ee]),_:1}),l(v,{modelValue:e.event.description,"onUpdate:modelValue":o[10]||(o[10]=s=>e.event.description=s),disabled:!e.isEditing},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(r,{style:{display:"flex","align-items":"center","justify-content":"center"}},{default:t(()=>[h("h1",_e,"Confirmados ("+b(e.numberConfirmed)+"/ "+b(e.event.occupancy)+")",1),e.numberConfirmed<e.event.occupancy&&e.shouldShowButton&&e.event.status==1?(d(),c(p,{key:0,size:"large",color:"success",onClick:o[11]||(o[11]=s=>e.confirmModal()),style:{"margin-bottom":"5px","margin-left":"15px"},type:"submit"},{default:t(()=>[we]),_:1})):f("",!0)]),_:1}),ke,l(r,null,{default:t(()=>[(d(!0),T(D,null,le(e.volunteersPresent,s=>(d(),c(i,{cols:"12",md:"4",key:s.id},{default:t(()=>[!s.photo.includes("jpg")||!s.photo.includes("png")?(d(),c(P,{key:0,size:"50"},{default:t(()=>[Ce]),_:1})):f("",!0),s.photo.includes(".jpg")||s.photo.includes(".png")?(d(),c(P,{key:1,size:"50"},{default:t(()=>[h("img",{src:s.photo,height:"50"},null,8,Te)]),_:2},1024)):f("",!0),l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText",style:{"margin-left":"15px"}},{default:t(()=>[a(b(s.name),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),l(se,{modelValue:e.showModel,"onUpdate:modelValue":o[14]||(o[14]=s=>e.showModel=s),width:"450"},{default:t(()=>[l(V,{title:"Confirmação de presença"},{default:t(()=>[l(r,null,{default:t(()=>[l(i,{cols:"12",md:"12"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[Me]),_:1}),h("h1",null,b(e.event.name),1)]),_:1})]),_:1}),l(r,null,{default:t(()=>[l(i,{cols:"12",md:"12"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[Be]),_:1}),h("h1",null,b(new Date(e.event.happenAt).toLocaleDateString()),1)]),_:1})]),_:1}),l(r,null,{default:t(()=>[l(i,{cols:"12",md:"12"},{default:t(()=>[l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[De]),_:1}),h("h1",null,b(new Date(e.event.happenAt).getHours()+":"+(new Date(e.event.happenAt).getMinutes()<10?"0":"")+new Date(e.event.happenAt).getMinutes()),1)]),_:1})]),_:1}),l(u,{class:"text-subtitle-1 font-weight-semibold text-lightText"},{default:t(()=>[Pe]),_:1}),l(r,null,{default:t(()=>[l(i,{cols:"12",md:"12",style:{"text-align":"right"}},{default:t(()=>[l(p,{style:{"margin-right":"5px"},size:"large",onClick:o[12]||(o[12]=s=>e.closeModal()),color:"light",type:"submit"},{default:t(()=>[Se]),_:1}),l(p,{style:{"margin-right":"5px"},size:"large",onClick:o[13]||(o[13]=s=>e.confirmVacancy()),disabled:!e.isTimeEnded,color:"success",type:"submit"},{default:t(()=>[a(b(e.confirmLabel),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Oe=ae(ie,[["render",ze]]);export{Oe as default};
